<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/body.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/form.css">
    <link rel="stylesheet" href="css/responsivo.css">


    <title> Entrar - Autobotics </title>
</head>

<body>

    <header>
        <section class="container">
             <nav class="menu-responsivo">
                <input type="checkbox" name="chk_hamburguer" id="chk_hamburguer" class="check_hamburguer">

                <section class="hamburguer">
                    <span></span>
                    <span></span>
                    <span></span>
                </section>
                <ul>
                    <li>
                        <a href="index.html#inicio"> Início </a>
                    </li>
                    <li>
                        <a href="index.html#sobre"> Sobre </a>
                    </li>
                    <li>
                        <a href="index.html#servicos"> Serviços </a>
                    </li>
                    <li>
                        <a href="index.html#contato"> Contato </a>
                    </li>
                    <li>
                        <a href="login.html"> Entrar </a>
                    </li>
                </ul>
            </nav>


            <a class="link-logo" href="index.html">
                <img src="assets/logo/AUTOBOTICS.png" alt="Logo Autobotics">
            </a>
            <nav class="menu-normal">
                <a href="index.html#inicio"> Início </a>
                <a href="index.html#sobre"> Sobre </a>
                <a href="index.html#servicos"> Serviços </a>
                <a href="index.html#contato"> Contato </a>
                <a href="login.html" class="botao"> Entrar </a>
            </nav>

            <span class="elemento-vazio"></span>
        </section>
    </header>

    <main id="login" class="pagina container">
        <section class="form">
            <div class="redirecionar">
                <h2 class="titulo"> Não possui cadastro? </h2>
                <a href="cadastro.html" class="botaoLink"> Cadastre-se </a>
            </div>

            <div class="formulario">
                <h2 class="titulo"> Login </h2>

                <label for="email">
                    <img src="assets/icones/emailImg.png" alt="Icone de e-mail" class="iconesPeq">
                    E-mail
                </label>
                <input type="email" name="email" id="email" placeholder="Digite seu e-mail">

                <label for="senha">
                    <img src="assets/icones/senhaImg.png" alt="Icone de senha" class="iconesPeq">
                    Senha
                </label>
                <input type="password" name="senha" id="senha" placeholder="Digite sua senha">

                <button class="botaoLink" id="botaoEntrar"> Entrar </button>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 - Autobotics | Todos os direitos reservados </p>
    </footer>

<script>
  
    const inputEmail = document.getElementById("email");
    const inputSenha = document.getElementById("senha");
    const botaoEntrar = document.getElementById("botaoEntrar");

    botaoEntrar.addEventListener("click", function(event) {
      event.preventDefault(); 

      const email = inputEmail.value.trim();
      const senha = inputSenha.value;

      if (!email || !senha) {
        alert("Preencha e-mail e senha para entrar.");
        return;
      }


      if (email == "root" && senha == "Sptech#2024"){
        window.location.href = "empresas.html";
        console.log("Bem vindo admin")
      }


      fetch("/usuarios/login", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ email, senha })
      })
      .then(async response => {
        const data = await response.json();
        if (!response.ok) {
          
          alert(data.mensagem || "Erro ao realizar login");
          return;
        }
     
        alert(`Olá ${data.nome}! Login efetuado.`);
     
        window.location.href = "dashboard.html";
      })
      .catch(err => {
        console.error("Falha na requisição de login:", err);
        alert("Não foi possível conectar ao servidor.");
      });
    });
  </script>
</body>
</html>
